# üõ∞Ô∏è SatelliteTracker

**SatelliteTracker** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ ASP.NET Core, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è –ø—Ä–∏—ë–º–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ GPS/NMEA-–¥–∞–Ω–Ω—ã—Ö —Å–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö –ø—Ä–∏—ë–º–Ω–∏–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket.
## üõ∞Ô∏è –°–∏–º—É–ª—è—Ü–∏—è GPS-–¥–∞–Ω–Ω—ã—Ö (Simulation Mode)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –ø–æ–ª—É—á–µ–Ω–∏—è GPS-–¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ **–†–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º** ‚Äî –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è —Å COM-–ø–æ—Ä—Ç–∞ (`SimulatedGpsReader`)
- üß™ **–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏** ‚Äî  –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `Nmea_src/output.nmea`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ NMEA.  –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ –¥—Ä—É–≥–æ–º—É —Ñ–∞–π–ª—É –≤ `SimulationDataFilePath`.

## üì° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ NMEA-—Å–æ–æ–±—â–µ–Ω–∏—è

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ä—Å–∏–Ω–≥ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π:

- `$GPGGA` ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –≤—ã—Å–æ—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤
- `$GPGSA` ‚Äî –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏: PDOP, HDOP, VDOP
- `$GPGSV` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–∏–º—ã—Ö —Å–ø—É—Ç–Ω–∏–∫–∞—Ö
- `$GPRMC` ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å
- `$GPGLL` ‚Äî —à–∏—Ä–æ—Ç–∞ –∏ –¥–æ–ª–≥–æ—Ç–∞

**–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –Ω–µ –≤—Å–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π**
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏, —Ç–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–∏–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π —É –≤–∞—Å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç. 
```c#
if (nmeaMessage.StartsWith("$GPGGA"))
{
	var data = ParseGPGGA(nmeaMessage);
	if (data != null)
	{
		await _repository.AddSatelliteDataAsync(data);
		_logger.LogDebug($"Parsed GPGGA: Lat={data.Latitude}, Lon={data.Longitude}");
	}
	else
	{
		_logger.LogWarning($"Parsing $GPGGA returned null.");
	}
	return data;
}
else if (nmeaMessage.StartsWith("$GPGSV"))
{
	var satellites = ParseGPGSV(nmeaMessage);
	foreach (var sat in satellites)
	{
		await _repository.AddSatelliteDataAsync(sat);
	}
	_logger.LogInformation($"Parsed GPGSV with {satellites.Count} satellites");
	return null;
}
```

–í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ—Å—è —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç data.
## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- .NET 7 / C#
- ASP.NET Core WebAPI
- Entity Framework Core —Å PostgreSQL
- NMEA –ø–∞—Ä—Å–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Microsoft.Extensions.Logging
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º COM-–ø–æ—Ä—Ç–æ–º –∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–≥ `SimulationMode` –≤ `true` –≤ —Ñ–∞–π–ª–µ `appsettings.json`:

```json
"GpsSettings": {
  "SimulationMode": true,
  "SimulationDataFilePath": "Nmea_src/output.nmea",
  "UpdateIntervalMs": 1000,
  "PortName": "COM3",
  "BaudRate": 9600,
  "DataBits": 8,
  "Parity": "None",
  "StopBits": "One",
  "WebSocketPath": "/ws"
}
```

## QuicStart

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ IDE
```bash
git clone https://github.com/halfy1/SatelliteTracker
```
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ PostgreSQL –≤ `appsettings.json`
	–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è `Username` , `Password`
```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Port=5432;Database=SatelliteTracker;Username=___;Password=___"
}
```
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü:
```bash
dotnet ef database update
```
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:
```bash
dotnet run
```
5. –í —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ NMEA –±—É–¥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ —Ñ–∞–π–ª–∞ (–∏–ª–∏ COM-–ø–æ—Ä—Ç–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —Å–∏–º—É–ª—è—Ü–∏–∏)

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `SimulatedGpsReader` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ GPS –¥–∞–Ω–Ω—ã—Ö (—Å–∏–º—É–ª—è—Ü–∏—è –∏–ª–∏ COM-–ø–æ—Ä—Ç)
- `NmeaParserService` ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è NMEA —Å–æ–æ–±—â–µ–Ω–∏–π
- `SatelliteDataRepository` ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `AppDbContext` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã —Å –º–æ–¥–µ–ª—å—é `SatelliteData`

## TODO

 - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ NMEA —Å–æ–æ–±—â–µ–Ω–∏–π (GPGSA, GPRMC –∏ –¥—Ä—É–≥–∏–µ)
 - [x] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–ø—É—Ç–Ω–∏–∫–æ–≤ –∏ —Ç—Ä–µ–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ 
 - [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º (GLONASS, Galileo –∏ —Ç.–¥.)